<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
     <!-- Bootstrap 4 CND -->
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">

    <!-- jQuery library -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.slim.min.js"></script>

    <!-- Popper JS -->
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- link box icon -->
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <!-- link css -->
    <link rel="stylesheet" href="Nam.css">
    <link rel="stylesheet" href="style.css">
    <script src="./Admin/js/loginTrue.js"></script>


</head>
<body>
  <!-- header -->
  <div class="row header text-light" style="height: 55px;">
    <div class="col-3 header-logo">
      <a href=""><img style="height: 50px; width:200px;"
          src="data:image/png;base64,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"
          alt="logo header"></a>
    </div>
    <div class="col d-flex center header-search">
      <input id="search-input" class="pl-2" type="text" placeholder="Nhập Từ Khóa Tìm Kiếm ...">
      <button class="mr-2"><i class='bx bx-search'></i></button>
    </div>
    <div class="col-3 d-flex center" id="avatarFrame">
      <a class="mr-2" href="./Login/?#">Đăng Nhập</a>
      <p class="mt-3">/</p>
      <a class="ml-2" href="./Login/?#">Đăng Kí</a>
    </div>
  </div>
  <style>
    /* CSS cho avatar box */
    .avatar-box {
      position: relative;
      display: flex;
      align-items: center;
      cursor: pointer;
    }

    .avatar-box img {
      width: 30px;
      /* Độ rộng của ảnh avatar */
      height: 30px;
      /* Chiều cao của ảnh avatar */
      border-radius: 50%;
      /* Bo tròn ảnh */
      margin-right: 8px;
      /* Khoảng cách giữa ảnh và dropdown icon */
    }

    /* CSS cho dropdown box */
    .dropdown-content {
      display: none;
      position: absolute;
      background-color: #f1f1f1;
      min-width: 120px;
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
      z-index: 1;
      margin-top: 200px;
    }

    .dropdown-content a {
      color: black;
      padding: 12px 16px;
      text-decoration: none;
      display: block;
    }

    .dropdown-content a:hover {
      background-color: #ddd;
    }

    .show {
      display: block;
    }
  </style>
  <!-- navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown"
      aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavDropdown">
      <ul class="navbar-nav ml-3">
        <li class="nav-item dropdown ml-3">
          <a class="nav-link dropdown-toggle text-white" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">
            Chủ Đề
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
            <a class="dropdown-item" href="#">Action</a>
            <a class="dropdown-item" href="#">Another action</a>
            <a class="dropdown-item" href="#">Something else here</a>
          </div>
        </li>
        <li class="nav-item dropdown ml-3">
          <a class="nav-link dropdown-toggle text-white" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">
            Bảng Xếp Hạng
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
            <a class="dropdown-item" href="#">Action</a>
            <a class="dropdown-item" href="#">Another action</a>
            <a class="dropdown-item" href="#">Something else here</a>
          </div>
        </li>
        <li class="nav-item dropdown ml-3">
          <a class="nav-link dropdown-toggle text-white" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">
            Album
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
            <a class="dropdown-item" href="#">Action</a>
            <a class="dropdown-item" href="#">Another action</a>
            <a class="dropdown-item" href="#">Something else here</a>
          </div>
        </li>
        <li class="nav-item dropdown ml-3">
          <a class="nav-link dropdown-toggle text-white" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">
            Nghệ Sĩ
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
            <a class="dropdown-item" href="#">Action</a>
            <a class="dropdown-item" href="#">Another action</a>
            <a class="dropdown-item" href="#">Something else here</a>
          </div>
        </li>
      </ul>
    </div>
  </nav>
<!--Content-->>  
    <div class="container">
        <div class="text-center">
          <img class="imgArtis_detail" src="background.jpg" alt="img-ca-sĩ">
          <div style="margin-top: -100px; color: white">
              <h1 id="singer-name"></h1>
              <p id="listen-count">Sô lượt nghe:</p>
          </div>
        </div>
        <div class="row" style="min-height: 500px;">
            <div class="col-8">
                <h1 class="mt-3" style="padding-left: 40px; width: 380px" >Bài Hát</h1>
                <ul id="list-songs">
                </ul>
            </div>
            <div class="col-4">
              <img src="" class="image-artist" style="width: 100%;
              height: auto;
              padding-top: 30px;
              padding-left: 40px;" >
            </div>
        </div>
    </div>
    <script>
      let singerID
    // Lấy giá trị của 'id' từ URL
    const urlParams = new URLSearchParams(window.location.search);
    singerID = urlParams.get("id");
    function getListenCount() {
      fetch("http://127.0.0.1:8000/api/getTotalListenCount", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({ id: singerID }),
      })
        .then((response) => response.json())
        .then((data) => {
          updateListenCount(data);
        })
        .catch((error) => {
          console.error("Lỗi khi tải dữ liệu:", error);
        });
    }
    function callSinger() {
      fetch("http://127.0.0.1:8000/api/singer", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({ id: singerID }),
      })
        .then((response) => response.json())
        .then((data) => {
          updateSinger(data);
        })
        .catch((error) => {
          console.error("Lỗi khi tải dữ liệu:", error);
        });
    }
    function callSong() {
      fetch("http://127.0.0.1:8000/api/song/searchbysinger", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({ singerID: singerID  }),
      })
        .then((response) => response.json())
        .then((data) => {
          const songs = Object.values(data)
          updateSongs(songs);
        })
        .catch((error) => {
          console.error("Lỗi khi tải dữ liệu:", error);
        });
    }
    async function updateSinger(data) {
      const singerData = data;
      document.getElementById("singer-name").innerHTML = `<b>${singerData.name}</b>`
      document.querySelector(".image-artist").src = "http://127.0.0.1:8000" + singerData.urlAvatar;
    }
    async function updateSongs(data) {
      const listSong = document.getElementById('list-songs');
      // Kiểm tra xem phần tử artistList có tồn tại không trước khi tiếp tục
      if (listSong) {
        listSong.innerHTML = "";
        data.forEach((songs) => {
          const listItem = `
          <li class=" mt-1 mb-2 pt-3 w-100 pb-2" style="border-bottom: 1px solid black; width: 380px; list-style: none;">
            <a class="mb-3" href="play.html?id=${songs.id}"><b>${songs.title}</b></a>
        </li>
          `;
          listSong.innerHTML += listItem;
        });
      } else {
        console.error("Không tìm thấy phần tử với ID 'artist-list'.");
      }
    }
    async function updateListenCount(data) {
      const ListenCount = document.getElementById('listen-count');
      // Kiểm tra xem phần tử artistList có tồn tại không trước khi tiếp tục
        ListenCount.innerHTML = "";
        ListenCount.innerHTML = "Tổng số lượt nghe " + data.total_listen_count;
    };

    function fetchData(){
      getListenCount();
      callSinger();
      callSong();
    }
    fetchData();
    </script>
    <!-- Footer -->
    <footer class="page-footer font-small indigo bg-dark">
        <!-- Footer Links -->
        <div class="container text-center text-md-left">
          <!-- Grid row -->
          <div class="row">
            <!-- Grid column -->
            <div class="col-md-3 mx-auto">
              <!-- Links -->
              <h5 class="font-weight-bold text-uppercase mt-3 mb-4 text-white">Thông Tin</h5>
              <ul class="list-unstyled footer_list ">
                <li>
                  <a href="#!">Very long link 1</a>
                </li>
                <li>
                  <a href="#!">Very long link 2</a>
                </li>
                <li>
                  <a href="#!">Very long link 3</a>
                </li>
                <li>
                  <a href="#!">Very long link 4</a>
                </li>
              </ul>
      
            </div>
            <!-- Grid column -->
            <hr class="clearfix w-100 d-md-none">
            <!-- Grid column -->
            <div class="col-md-3 mx-auto">
              <!-- Links -->
              <h5 class="font-weight-bold text-uppercase mt-3 mb-4 text-white">Bảng Xếp Hạng</h5>
              <ul class="list-unstyled footer_list">
                <li>
                  <a href="#!">Link 1</a>
                </li>
                <li>
                  <a href="#!">Link 2</a>
                </li>
                <li>
                  <a href="#!">Link 3</a>
                </li>
                <li>
                  <a href="#!">Link 4</a>
                </li>
              </ul>
            </div>
            <!-- Grid column -->
            <hr class="clearfix w-100 d-md-none">
            <!-- Grid column -->
            <div class="col-md-3 mx-auto">
      
              <!-- Links -->
              <h5 class="font-weight-bold text-uppercase mt-3 mb-4 text-white">Tải Ứng Dụng</h5>
      
              <ul class="list-unstyled footer_list">
                
      
            </div>
            <!-- Grid column -->
      
            <hr class="clearfix w-100 d-md-none">
      
            <!-- Grid column -->
            <div class="col-md-3 mx-auto">
      
              <!-- Links -->
              <h5 class="font-weight-bold text-uppercase mt-3 mb-4 text-white">Liên Kết</h5>
      
              <ul class="list-unstyled footer_list">
                
              </ul>
      
            </div>
            <!-- Grid column -->
      
          </div>
          <!-- Grid row -->
      
        </div>
        <!-- Footer Links -->
      
        <!-- Copyright -->
        <div class="footer-copyright text-center py-3 text-white">© 2023 Copyright:
          <a href="/"> TNIT</a>
        </div>
        <!-- Copyright -->
      
      </footer>
</body>
</html>
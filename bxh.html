<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>nhac.vnvn</title>
    <link rel="stylesheet" href="" />
    <link rel="shortcut icon" href="images/favicon.ico" />
    <!-- Bootstrap 4 CND -->
    <!-- Latest compiled and minified CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
    />

    <!-- jQuery library -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.slim.min.js"></script>

    <!-- Popper JS -->
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>

    <!-- jQuery library -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.slim.min.js"></script>

    <!-- Popper JS -->
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- link box icon -->
    <link
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
      rel="stylesheet"
    />
    <!-- link css -->
    <link rel="stylesheet" href="Nam.css" />
    <link rel="stylesheet" href="style.css" />
    <script src="js/search-bar.js"></script>
    <script src="./Admin/js/loginTrue.js"></script>
    <style>
      ul li {
        list-style: none;
      }
    </style>
    <style>
      /* CSS cho avatar box */
      .avatar-box {
        position: relative;
        display: flex;
        align-items: center;
        cursor: pointer;
      }

      .avatar-box img {
        width: 30px;
        /* Độ rộng của ảnh avatar */
        height: 30px;
        /* Chiều cao của ảnh avatar */
        border-radius: 50%;
        /* Bo tròn ảnh */
        margin-right: 8px;
        /* Khoảng cách giữa ảnh và dropdown icon */
      }

      /* CSS cho dropdown box */
      .dropdown-content {
        display: none;
        position: absolute;
        background-color: #f1f1f1;
        min-width: 120px;
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        z-index: 1;
        margin-top: 200px;
      }

      .dropdown-content a {
        color: black;
        padding: 12px 16px;
        text-decoration: none;
        display: block;
      }

      .dropdown-content a:hover {
        background-color: #ddd;
      }

      .show {
        display: block;
      }
    </style>
  </head>

  <body>
    <!-- header -->
    <div class="row header text-light" style="height: 55px">
      <div class="col-3 header-logo">
        <a href="index.html" style="padding-left: 20px"
          ><img
            style="height: 50px; width: 80px"
            src="images/logo.jpg"
            alt="logo header"
        /></a>
      </div>
      <div class="col d-flex center header-search">
        <input
          id="search-input"
          class="pl-2"
          type="text"
          placeholder="Nhập Từ Khóa Tìm Kiếm ..."
        />
        <button class="mr-2" onclick="Search()">
          <i class="bx bx-search"></i>
        </button>
      </div>
      <div class="col-3 d-flex center" id="avatarFrame">
        <a class="mr-2" href="./Login/?#">Đăng Nhập</a>
        <p class="mt-3">/</p>
        <a class="ml-2" href="./Login/?#">Đăng Kí</a>
      </div>
    </div>

    <!-- navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <button
        class="navbar-toggler"
        type="button"
        data-toggle="collapse"
        data-target="#navbarNavDropdown"
        aria-controls="navbarNavDropdown"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNavDropdown">
        <ul class="navbar-nav ml-3">
          <li class="nav-item dropdown ml-3">
            <a
              class="nav-link text-white"
              href="bxh.html"
              id="navbarDropdownMenuLink"
            >
              Bảng Xếp Hạng
            </a>
          </li>
          <li class="nav-item dropdown ml-3">
            <a
              class="nav-link text-white"
              href="artist.html"
              id="navbarDropdownMenuLink"
            >
              Ca Sĩ
            </a>
          </li>
          <li class="nav-item dropdown ml-3">
            <a
              class="nav-link text-white"
              href="album.html"
              id="navbarDropdownMenuLink"
            >
              Thể loại
            </a>
          </li>
        </ul>
      </div>
    </nav>
    <!-- content -->
    <div id="content" class="chart-index">
      <div class="wrapper" id="main-body">
        <div class="column1">
          <div class="wrr-column1">
            <!--main-content-->
            <div>
              <div class="title-container">
                <div class="title">
                  <h2 class="name">BXH Bài Hát Có Lượt Nghe Cao Nhất</h2>
                </div>
              </div>
              <div class="box-content">
                <div class="bxh-des">
                  BXH Nhac.vn là bảng xếp hạng nhạc uy tín được cập nhật vào mỗi
                  Thứ Hai hàng tuần , dựa trên các số liệu thống kê trên
                  Nhac.vn. Các tiêu chí dùng để xác định điểm xếp hạng của mỗi
                  tác phẩm bao gồm lượt nghe, yêu thích, bình luận, chia sẻ của
                  người dùng trên cả phiên bản web desktop và ứng dụng mobile.
                </div>
                <div class="playApp">
                  <select
                    name="weeks"
                    id="top-many"
                    class="chart-time"
                    style="width: 100px"
                    onchange="fetchData()"
                  >
                    <option selected="selected" value="5">5</option>
                    <option value="10">10</option>
                    <option value="20">20</option>
                    <option value="100">100</option>
                  </select>
                </div>
                <div class="bxh-song-list">
                  <ul id="bxh_song" class="bxh_song bxh_list siz_w">
                    <li id="song_559979">
                      <span class="number one">01</span>
                      <a href="">
                        <img class="thumb" src="" />
                      </a>
                      <div class="fll" style="margin-top: 10px">
                        <h3 class="over-text mw350">
                          <a href="">Yêu Nhau Nửa Ngày</a>
                        </h3>
                        <p class="over-text mw350">
                          <a title="" class="singer" href="">Phan Mạnh Quỳnh</a>
                        </p>
                      </div>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script>
      function fetchData() {
        const many = document.getElementById("top-many").value;

        fetch("http://127.0.0.1:8000/api/song/gettopsong", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({ many: many }),
        })
          .then((response) => response.json())
          .then((data) => {
            updateTopSong(data);
          })
          .catch((error) => {
            console.error("Lỗi khi tải dữ liệu:", error);
          });
      }
      function updateTopSong(data) {
        let number = 1;
        const topSong = data;
        const area = document.getElementById("bxh_song");
        area.innerHTML = "";
        data.forEach((topSong) => {
          const Item = `
            <li id="${topSong.id}">
              <span class="number" style="font-size:24px">${number}</span>
              <div class="fll" style="margin-top: 10px;">
                  <h3 class="over-text mw350"><a href="play.html?id=${topSong.id}" >${topSong.title}</a></h3>
                  <p class="over-text mw350"><a title="" class="singer" href="play.html?id=${topSong.id}" >${topSong.artist}</a></p>
              </div>
          </li>
            `;
          number += 1;
          area.innerHTML += Item;
        });
      }
      fetchData();
    </script>

    <footer class="page-footer font-small indigo bg-dark">
      <!-- Copyright -->
      <div class="footer-copyright text-center py-3 text-white">
        © 2023 Copyright:
        <a href="#">TNIT</a>
      </div>
    </footer>
  </body>
</html>
